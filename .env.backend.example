# =============================================================================
# BACKEND ENVIRONMENT VARIABLES - RENDER DEPLOYMENT (EXAMPLE)
# =============================================================================
# Deploy to: api.visanet.app
# Platform: Render (NestJS API & Worker)
# 
# Instructions:
# 1. Copy this file to .env.backend
# 2. Replace all placeholder values with your actual values
# 3. Add these to Render Environment Variables dashboard
# =============================================================================

# Node Environment
# Options: development | production
NODE_ENV=production
PORT=3000

# =============================================================================
# DATABASE & STORAGE
# =============================================================================

# PostgreSQL Database (Supabase)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres

# Redis Queue (Upstash or local Redis)
# Development: redis://localhost:6379
# Production: rediss://default:[password]@[host].upstash.io:6379
REDIS_URL=rediss://default:[password]@[host].upstash.io:6379

# Supabase Backend Configuration
# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here_keep_secret
SUPABASE_STORAGE_BUCKET=visapi-files

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT & Session Security (Generate strong random strings)
# Generate with: openssl rand -base64 48
JWT_SECRET=your_strong_jwt_secret_at_least_32_characters
SESSION_SECRET=your_strong_session_secret_at_least_32_characters
CRON_SECRET=your_strong_cron_secret_at_least_32_characters

# CORS Configuration
# Development: http://localhost:3001
# Production: https://app.visanet.app
CORS_ORIGIN=https://app.visanet.app

# API Key Configuration
API_KEY_PREFIX=visapi_
API_KEY_EXPIRY_DAYS=90

# Allowed Email Domains for Magic Link Auth (comma-separated)
ALLOWED_EMAIL_DOMAINS=visanet.app,yourdomain.com

# =============================================================================
# RATE LIMITING & PERFORMANCE
# =============================================================================

# API Rate Limiting
API_RATE_LIMIT_BURST=200
API_RATE_LIMIT_SUSTAINED=2

# Queue Configuration
QUEUE_CONCURRENCY=10
QUEUE_MAX_RETRIES=3
QUEUE_RETRY_DELAY=5000

# =============================================================================
# INTEGRATIONS
# =============================================================================

# ChatGPT Builder WhatsApp API
# Get from: https://app.chatgptbuilder.io/dashboard
CGB_API_URL=https://app.chatgptbuilder.io/api
CGB_API_KEY=your_cgb_api_key_here
CGB_TIMEOUT=30000
CGB_RETRY_ATTEMPTS=3
CGB_CACHE_TIMEOUT=3600

# Email Service (Resend)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_YOUR_RESEND_API_KEY
NOREPLY_EMAIL=noreply@yourdomain.com

# PDF Generation (Puppeteer)
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
PDF_TIMEOUT=30000
PDF_MAX_PAGES=50

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Logging Configuration
# Options: error | warn | info | debug
LOG_LEVEL=info
LOG_FORMAT=json